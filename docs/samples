task_list = []

class Task {
    rel hasone previous
    rel hasone next
    rel hasmany steps 

    decl start_time {
        max(self.user_start_time, self.previous.end_time)
    }
        
    decl end_time {
        self.start_time + self.duration
    }

    proc constructor(duration, user_start_time) {
        self.user_start_time = user_start_time
        self.duration = duration
    }

    func wait_time {
        return self.start_time - self.previous.end_time
    }

}



proc add_task() {
    task = Task()
    last_task = task_list.max(Elements, t, t.end_time)
    task_list.add(task)
}
